use {exit}: "std/libc/proc.bl"

use {assert}: "src/tests/test_utils.bl"

fn main() {
    let x = from if false {
        yield 1
    } else {
        yield 2
    }

    let mut y = from {
        let mut sum = 0
        for let mut i = 0, i < 3, i += 1 {
            sum += i
        }
        yield sum
    }

    let z = from loop {
        if y % 4 != 0 {
            y += 1
            continue
        }

        yield y
    }

    assert(x + z == 6, "expected 6")

    exit(0)
}
